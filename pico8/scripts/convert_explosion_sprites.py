#!/usr/bin/env python3
"""
Convert explosion sprite data to PICO-8 format.
14 explosion frames, each 8x12 pixels.
"""

# Explosion sprite data from disassembly (14 frames, 12 bytes each)
explosion_sprites = [
    # Frame 1
    [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x08, 0x00, 0x00, 0x00, 0x00],
    # Frame 2
    [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x38, 0x10, 0x00, 0x00],
    # Frame 3
    [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x14, 0x00, 0x2C],
    # Frame 4
    [0x00, 0x14, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x58],
    # Frame 5
    [0x00, 0x2C, 0x00, 0x50, 0x00, 0x10, 0x00, 0x00, 0x00, 0x38, 0x00, 0x92],
    # Frame 6
    [0x00, 0x58, 0x00, 0xAA, 0x00, 0x54, 0x00, 0x54, 0x00, 0x00, 0x48, 0x10],
    # Frame 7
    [0x28, 0x92, 0x01, 0x58, 0x00, 0x82, 0x00, 0x54, 0x00, 0xA0, 0x10, 0x44],
    # Frame 8
    [0x52, 0x24, 0x10, 0xA4, 0x09, 0xA0, 0x00, 0x00, 0x84, 0x00, 0x55, 0x00],
    # Frame 9
    [0x29, 0x52, 0x52, 0xA4, 0x10, 0xA4, 0x01, 0x80, 0x01, 0x00, 0x80, 0x00],
    # Frame 10
    [0x45, 0x00, 0xA8, 0x52, 0x52, 0x24, 0x10, 0x24, 0x00, 0x80, 0x01, 0x00],
    # Frame 11
    [0x00, 0x00, 0x01, 0x00, 0x29, 0x50, 0x50, 0xA1, 0x00, 0x00, 0x00, 0x80],
    # Frame 12
    [0x01, 0x00, 0x80, 0x00, 0x00, 0x00, 0x81, 0x10, 0x00, 0x40, 0x00, 0x02],
    # Frame 13
    [0x00, 0x80, 0x00, 0x01, 0x00, 0x00, 0x20, 0x00, 0x00, 0x10, 0x00, 0x00],
    # Frame 14
    [0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00],
]

def byte_to_pico8_row(byte_val, color=9):
    """Convert a byte to a PICO-8 sprite row (orange for explosions)"""
    result = ""
    for bit in range(7, -1, -1):
        if byte_val & (1 << bit):
            result += f"{color:x}"
        else:
            result += "0"
    return result

def byte_to_binary_string(byte_val):
    """Convert byte to visual representation"""
    bits = format(byte_val, '08b')
    return bits.replace('1', '#').replace('0', '.')

# Print visual
print("=" * 60)
print("EXPLOSION SPRITE VISUALIZATION")
print("=" * 60)

for i, sprite_data in enumerate(explosion_sprites):
    print(f"\nFrame {i+1}:")
    for row in sprite_data:
        print(f"  {byte_to_binary_string(row)}")

# Generate PICO-8 sprite data
print("\n" + "=" * 60)
print("PICO-8 SPRITE DATA")
print("=" * 60)
print("\nExplosion sprites will be at positions 14-27")
print("Add these to the sprite sheet starting at column 112 (14*8)")
print()

# Generate sprite rows
# Sprites 14-27 start at column 112
for sprite_idx, sprite_data in enumerate(explosion_sprites):
    print(f"; Sprite {14+sprite_idx}: Explosion frame {sprite_idx+1}")
    padded_data = sprite_data + [0x00] * (16 - len(sprite_data))
    
    for row_idx, byte_val in enumerate(padded_data):
        sprite_row = byte_to_pico8_row(byte_val, color=9)  # Orange
        print(f"Row {row_idx}: add '{sprite_row}' at column {112+sprite_idx*8}")
    print()
